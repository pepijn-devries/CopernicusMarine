% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cms_download_subset.r
\name{cms_download_subset}
\alias{cms_download_subset}
\title{Subset and download a specific marine product from Copernicus}
\usage{
cms_download_subset(
  username = cms_get_username(),
  password = cms_get_password(),
  destination,
  product,
  layer,
  variable,
  region,
  timerange,
  verticalrange,
  overwrite = FALSE,
  progress = TRUE,
  crop = TRUE,
  asset,
  ...
)
}
\arguments{
\item{username}{Your Copernicus marine user name. Can be provided with
\code{cms_get_username()} (default), or as argument here.}

\item{password}{Your Copernicus marine password. Can be provided as
\code{cms_get_password()} (default), or as argument here.}

\item{destination}{\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\strong{[Deprecated]}} This argument is deprecated.
Data is no longer written to a file but loaded as a \code{\link[stars:st_as_stars]{stars::st_as_stars()}} object
into memory.}

\item{product}{An identifier (type \code{character}) of the desired Copernicus marine product.
Can be obtained with \code{\link{cms_products_list}}.}

\item{layer}{The name of a desired layer within a product (type \code{character}). Can be obtained with \code{\link{cms_product_details}}.}

\item{variable}{The name of a desired variable in a specific layer of a product (type \code{character}).
Can be obtained with \code{\link{cms_product_details}}.}

\item{region}{Specification of the bounding box as a \code{vector} of \code{numeric}s WGS84 lat and lon coordinates.
Should be in the order of: xmin, ymin, xmax, ymax.}

\item{timerange}{A \code{vector} with two elements (lower and upper value)
for a requested time range. The \code{vector} should be coercible to \code{POSIXct}.}

\item{verticalrange}{A \code{vector} with two elements (minimum and maximum)
numerical values for the depth of the vertical layers (if any). Note that values below the
sea surface needs to be specified as negative values.}

\item{overwrite}{\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\strong{[Deprecated]}} This argument is deprecated.
Data is no longer written to a file but loaded as a \code{\link[stars:st_as_stars]{stars::st_as_stars()}} object
into memory.}

\item{progress}{A logical value. When \code{TRUE} (default) progress is reported to the console.
Otherwise, this function will silently proceed.}

\item{crop}{On the server, the data is organised in chunks. The subset
will download chunks that overlap with the specified ranges, but often
covers a larger area. When \code{crop = TRUE} (default), the data will be cropped
to the specified \code{region}. If set to \code{FALSE} all downloaded data will be returned.}

\item{asset}{Type of asset to be used when subsetting data. Should be one
of \code{"default"}, \code{"ARCO"}, \code{"static"}, \code{"omi"}, or \code{"downsampled4"}.
When missing, set to \code{NULL} or set to \code{"default"}, it will use the first
asset available for the requested product and layer, in the order as listed
before.}

\item{...}{Ignored (reserved for future features).}
}
\value{
Returns a \code{\link[stars:st_as_stars]{stars::st_as_stars()}} object.
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}} Subset and download a specific marine product
from Copernicus.
}
\examples{
if (interactive() && requireNamespace("blosc")) {

  mydata <- cms_download_subset(
    product       = "GLOBAL_ANALYSISFORECAST_PHY_001_024",
    layer         = "cmems_mod_glo_phy-cur_anfc_0.083deg_P1D-m",
    variable      = c("uo", "vo"),
    region        = c(-1, 50, 10, 55),
    timerange     = c("2025-01-01 UTC", "2025-01-02 UTC"),
    verticalrange = c(0, -2)
  )

  plot(mydata["vo"])
} else {
  message("Make sure to run this in an interactive environment")
  message("and that the package 'blosc' is installed")
}
}
\author{
Pepijn de Vries
}
